# V0.5 — "Collaborates"

## Purpose

buddy can decompose problems, delegate to sub-agents, and support user-defined skills.

## Capabilities

- **Task delegation:** A `delegate` skill that spawns a sub-agent with a specific goal, a subset of available skills, and a designated provider/model. The parent agent can wait for results or continue working.
- **Parallel agents:** Multiple sub-agents can run concurrently. Results are collected and synthesized by the parent.
- **Critique flow:** An explicit `critique` skill that sends one agent's output to another agent for review. The critic returns structured feedback (approve / revise / reject with reasons). Not automatic — the orchestrating agent decides when critique is valuable.
- **Skill-creator framework:** Users can define new skills as:
  - A TOML manifest (name, description, input/output schema, permission level)
  - A sandboxed WASM module (compiled from Rust, Go, or anything targeting WASI) that implements the skill logic
  - OR a simple HTTP webhook (buddy calls a URL with the input, gets the output)
- **Skill marketplace:** A local directory of user-created skill packages. No central registry — just a folder of `.wasm` + `.toml` bundles. Share skills by sharing files.
- **Agent resource limits:** Each sub-agent has configurable limits: max tokens, max skill calls, max wall-clock time. No unbounded loops.

## Key Architectural Decisions

- Agents are not a new abstraction. An agent is a conversation with a system prompt, a set of allowed skills, and a model. The same `buddy-core` conversation engine runs it. The "delegation" is just creating a new conversation programmatically.
- WASM for user-defined skills is the key security decision. WASI provides a sandbox with explicit capabilities (filesystem access, network access) granted per-skill. No arbitrary native code execution.
- The critique pattern is a skill, not a framework feature. This means users can compose it differently (chain of critics, self-critique, skip it entirely). No opinionated workflow engine.
- Agent limits are hard limits enforced by the core, not soft suggestions. A sub-agent that hits its token limit gets terminated and returns what it has. The parent decides what to do.

## Intentionally Not Included

- No persistent agent identities or "personalities"
- No autonomous background agents (all agent trees are user-initiated)
- No self-modifying skills or meta-learning
- No GUI for skill creation (TOML + WASM is the interface)
- No central skill registry or auto-update mechanism
