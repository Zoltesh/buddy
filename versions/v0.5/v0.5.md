# V0.5 — "Everywhere"

## Purpose

buddy is accessible from multiple interfaces. The core is extracted into a library, and thin clients connect over Telegram, WhatsApp, and eventually the terminal.

## Capabilities

- **Core extraction:** The conversation engine, skill system, memory, and config management are extracted into a `buddy-core` library crate. The web server becomes one consumer of this library.
- **Telegram bot:** A `buddy-telegram` binary that connects to the Telegram Bot API. Supports text conversations, skill execution (with inline approval via Telegram buttons), and memory.
- **WhatsApp integration:** Via the WhatsApp Business API (or a bridge like `whatsmeow`). Same capabilities as Telegram.
- **Multi-provider expansion:** Add 3–4 more provider implementations: Ollama, Google Gemini, Mistral. Local model support is first-class.
- **Authentication:** The web UI now supports single-user password or token-based auth (not OAuth, not multi-user — just "is this person allowed to use this instance"). Required when binding to non-localhost.
- **Unified conversation history:** All interfaces write to the same SQLite database. Start a conversation on Telegram, continue it on the web.
- **Terminal CLI config commands:** With `buddy-core` extracted, a CLI binary can share the same config management logic. Users can view and modify settings via intuitive terminal commands (or just hand-edit `buddy.toml` as always).

## Key Architectural Decisions

- `buddy-core` is the product. Everything else is a shell. This is the most important refactor in the entire project. The core must have zero knowledge of HTTP, Telegram, or any transport.
- Each interface adapter translates its native format into core message types and back. The adapter handles transport-specific concerns (Telegram markdown, WhatsApp media, web streaming).
- Auth is deliberately simple. A single bearer token or password hash in the config file. Multi-user is a future concern if it ever happens. buddy is a *personal* assistant.
- For approval flows over Telegram/WhatsApp: the skill blocks until the user responds (with a configurable timeout that defaults to deny). No fire-and-forget mutations.
- The CLI config tool reuses `buddy-core`'s config parsing and validation. It reads and writes `buddy.toml` the same way the Settings UI does.

## Intentionally Not Included

- No multi-agent or delegation (V0.6)
- No skill-creator framework (V0.6)
- No voice input/output
- No multi-user support
- No end-to-end encryption beyond what the transport provides

## Sets Up V0.6 By

The clean `buddy-core` separation means agents (V0.6) are just multiple concurrent consumers of the core library. The multi-provider support means agents can use different models for different tasks. The CLI tooling provides the foundation for headless agent orchestration.
